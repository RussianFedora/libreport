From f9b8f72eb840211b7dd197a8abcc00b9bdf9c0ff Mon Sep 17 00:00:00 2001
From: Jiri Moskovcak <jmoskovc@redhat.com>
Date: Thu, 4 Apr 2013 18:48:01 +0200
Subject: [LIBREPORT PATCH 4/5] fixed reporting from bugzilla rhbz#926916

---
 src/plugins/Makefile.am                      | 3 ++-
 src/plugins/bugzilla_anaconda_event.conf     | 3 +++
 src/workflows/anaconda_event.conf            | 4 ++--
 src/workflows/workflow_AnacondaFedora.xml.in | 2 --
 4 files changed, 7 insertions(+), 5 deletions(-)
 create mode 100644 src/plugins/bugzilla_anaconda_event.conf

diff --git a/src/plugins/Makefile.am b/src/plugins/Makefile.am
index 7ffb894..79fe9d2 100644
--- a/src/plugins/Makefile.am
+++ b/src/plugins/Makefile.am
@@ -65,7 +65,8 @@ dist_eventsconf_DATA = \
     bugzilla_event.conf \
     rhtsupport_event.conf \
     uploader_event.conf \
-    emergencyanalysis_event.conf
+    emergencyanalysis_event.conf \
+    bugzilla_anaconda_event.conf
 
 reporters_extra_dist =
 if BUILD_BUGZILLA
diff --git a/src/plugins/bugzilla_anaconda_event.conf b/src/plugins/bugzilla_anaconda_event.conf
new file mode 100644
index 0000000..6d888e4
--- /dev/null
+++ b/src/plugins/bugzilla_anaconda_event.conf
@@ -0,0 +1,3 @@
+EVENT=report_Bugzilla component=anaconda
+	reporter-bugzilla -b \
+		-F /etc/libreport/plugins/bugzilla_format_libreport.conf
diff --git a/src/workflows/anaconda_event.conf b/src/workflows/anaconda_event.conf
index f71aebd..f369acd 100644
--- a/src/workflows/anaconda_event.conf
+++ b/src/workflows/anaconda_event.conf
@@ -1,2 +1,2 @@
-EVENT=workflow_AnacondaFedora type=anaconda
-EVENT=workflow_AnacondaUpload type=anaconda
+EVENT=workflow_AnacondaFedora component=anaconda
+EVENT=workflow_AnacondaUpload component=anaconda
diff --git a/src/workflows/workflow_AnacondaFedora.xml.in b/src/workflows/workflow_AnacondaFedora.xml.in
index 5c8c2a7..6322d9a 100644
--- a/src/workflows/workflow_AnacondaFedora.xml.in
+++ b/src/workflows/workflow_AnacondaFedora.xml.in
@@ -4,8 +4,6 @@
     <_description>Process the report using the Fedora infrastructure</_description>
 
     <events>
-        <event>report_uReport</event>
         <event>report_Bugzilla</event>
-        <event>post_report</event>
     </events>
 </workflow>
-- 
1.8.1.4

